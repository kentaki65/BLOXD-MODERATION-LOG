# BloxdModerationLog
---
### *「何が・誰によって・いつ起きたか」を後から辿れる、Bloxd サーバー運営向けの監査ログシステム*
Bloxdサーバー向けの**プレイヤー行動・ブロック操作を記録／監査する管理用ログツール**です。サーバーログとブロック履歴を**永続保存**し、不正行為の調査・抑止を目的としています。

## 連絡先 / サポート
- 質問・相談がある場合は Discord で連絡してください： **Discord:** `initial_ki`

## 主な機能
- プレイヤー行動ログの記録
- ロック操作の履歴追跡
- インスペクター（即時調査）機能

## CONFIG
```js
const config = {
  SERVER_LOGS_PER_MESSAGE: 5,
  BLOCK_LOGS_PER_MESSAGE: 3,
  PREVENT_CHANGE_BY_EXPLOSIVE: true,
  SAVE_CHANGE_BY_WORLD: false,
  SAVE_DATA_CHANGED_BY_WORLD: true,
  SAVE_DATA_CHANGED_BY_PLAYER: true,
  MAX_BLOCK_HISTORY: 5,
  INSPECT_SHOW_NEWEST_FIRST: true,
  ENABLE_LOGGING: true,
  ALLOW_LIST: []
};
```
| 名前  | 説明 | 推奨値 |
| ------------- | ------------- | ------------- |
| SERVER_LOGS_PER_MESSAGE | 1つのメッセージで送信されるサーバーログの数 | 2 ~ 5 |
| BLOCK_LOGS_PER_MESSAGE  | 1つのメッセージで送信されるブロックログの数 | 2 ~ 4 |
| PREVENT_CHANGE_BY_EXPLOSIVE  | 真なら爆発物によるワールド変更をデフォルトで防ぎます | true |
| SAVE_CHANGE_BY_WORLD  | ワールドによるブロック変更を保存するか | true |
| SAVE_DATA_CHANGED_BY_WORLD  | ワールドによるブロック変更をブロックデータに保存するか | false |
| SAVE_DATA_CHANGED_BY_PLAYER  | プレイヤーによるブロック変更をブロックデータに保存するか | true |
| SAVE_DATA_CHANGED_BY_PLAYER  | プレイヤーによるブロック変更をブロックデータに保存するか | true |
| MAX_BLOCK_HISTORY  | ブロックに一時的に保存される履歴ログの最大数（超過分は自動的に破棄されます） | 4 ~ 8 |
| INSPECT_SHOW_NEWEST_FIRST  | ブロックを検査したときに、最新の履歴を先頭に表示するかを指定します。 | true |
| ENABLE_LOGGING  | ログの保存機能を有効／無効にします。 | true |
| ALLOW_LIST  | コマンドを使用できるプレイヤーを**DBID**で指定します。 | [any] |
> ※推奨値を超えて設定した場合、高確率で引数超過エラーが発生します。
> これらの問題について、けんたきは責任を負いません。推奨値内での使用を推奨します。

## コマンド
### `/bml inspect`
- 実行で検査モード ON / OFF 切り替え

| 設定可能な引数  | 説明 | 推奨値 |
| ------------- | ------------- | ------------- |
| なし  | なし  | なし |

---
### `/bml log <page> <type> <player> <time> <keyWord>`
- ストレージから条件を満たしたサーバーログを出力します。
- 引数は省略可能です。

| 設定可能な引数  | 説明 | 例 |
| ------------- | ------------- | ------------- |
| \<page>  | 表示するページ番号。（省略すると最初のページ） | 1 |
| \<type>  | ログ種別。 `join`|`chat` または `*`（全て） | chat |
| \<player>  | プレイヤー名または DBID を指定。`*`で全員 | kentaki_js |
| \<time>  | 日時フィルター。 `after:YYYY-MM-DD`|`before:YYYY-MM-DD` | after:2026-01-01 |
| \<keyword>  | メッセージ内のキーワードで絞り込み | hello |
